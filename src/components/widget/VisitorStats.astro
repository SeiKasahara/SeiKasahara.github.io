---
import WidgetLayout from "./WidgetLayout.astro";
import { Icon } from "astro-icon/components";
import { getLangFromUrl, useTranslations } from "@/i18n";

interface Props {
    class?: string;
    style?: string;
}

const className = Astro.props.class;
const style = Astro.props.style;

const currentLang = getLangFromUrl(Astro.url);
const t = useTranslations(currentLang);
---

<WidgetLayout id="visitor-stats" name={t('widget.visitorStats')} class={className} style={style}>
    <div class="flex flex-col gap-3 text-neutral-700 dark:text-neutral-300">
        <div class="flex items-center gap-2">
            <Icon name="fa6-solid:user" class="text-[var(--primary)]" />
            <span>{t('stats.visitors')}：</span>
            <span id="busuanzi_value_site_uv" class="font-bold">--</span>
        </div>
        <div class="flex items-center gap-2">
            <Icon name="fa6-solid:eye" class="text-[var(--primary)]" />
            <span>{t('stats.pageViews')}：</span>
            <span id="busuanzi_value_site_pv" class="font-bold">--</span>
        </div>
    </div>
</WidgetLayout>

<!-- Busuanzi 统计脚本 -->
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
