---
import type { GetStaticPaths } from "astro";
import ArchivePanel from "@components/ArchivePanel.svelte";
import MainGridLayout from "@layouts/MainGridLayout.astro";
import { getSortedPostsList } from "@utils/content-utils";
import { languages, useTranslations, type Lang } from "@/i18n";

export const getStaticPaths: GetStaticPaths = async () => {
	return Object.keys(languages).map((lang) => ({
		params: { lang },
	}));
};

const { lang } = Astro.params as { lang: Lang };
const t = useTranslations(lang);

const sortedPostsList = await getSortedPostsList();
---

<MainGridLayout title={t('page.archive')} lang={lang}>
    <ArchivePanel
        sortedPosts={sortedPostsList}
        lang={lang}
        postsLabel={t('post.posts')}
        client:only="svelte"
    />
</MainGridLayout>
